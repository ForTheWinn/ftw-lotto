{"version":3,"sources":["../../neo-react/packages/local-wallet/lib/scenes/import-file/components/import-button/index.js","../../neo-react/packages/local-wallet/lib/scenes/saved-wallets/index.js","../../neo-react/packages/local-wallet/lib/scenes/saved-wallets/components/form.js","../../neo-react/packages/local-wallet/lib/scenes/import-file/index.js"],"names":["__webpack_require__","r","__webpack_exports__","_Users_ed_Projects_modules_lottery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_1__","react__WEBPACK_IMPORTED_MODULE_1___default","n","_components_display_error__WEBPACK_IMPORTED_MODULE_2__","_ref","onImport","_useState","Object","_useState2","error","setError","a","createElement","Fragment","message","onClose","undefined","className","onChange","e","target","files","length","reader","FileReader","onload","event","jsonObj","JSON","parse","result","accounts","wallets","map","acc","address","encryptedKey","key","readAsText","type","name","accept","_cityofzion_neon_js__WEBPACK_IMPORTED_MODULE_0__","_cityofzion_neon_js__WEBPACK_IMPORTED_MODULE_0___default","formik__WEBPACK_IMPORTED_MODULE_1__","_components_form__WEBPACK_IMPORTED_MODULE_2__","yup__WEBPACK_IMPORTED_MODULE_3__","ValidateSchema","shape","password","required","SavedWallets","mapPropsToValues","props","savedWallets","validationSchema","handleSubmit","values","setSubmitting","setStatus","create","account","decrypt","then","onConnected","provider","privateKey","encrypted","catch","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","_components_password_input__WEBPACK_IMPORTED_MODULE_2__","_components_display_error__WEBPACK_IMPORTED_MODULE_3__","_props$savedWallets","isSubmitting","errors","setFieldValue","submitForm","status","onBlur","value","item","onKeyDown","val","disabled","concat","_components_import_button__WEBPACK_IMPORTED_MODULE_2__","_saved_wallets__WEBPACK_IMPORTED_MODULE_3__","setWallets"],"mappings":"oGAAAA,EAAAC,EAAAC,GAAA,IAAAC,EAAAH,EAAA,GAAAI,EAAAJ,EAAA,GAAAK,EAAAL,EAAAM,EAAAF,GAAAG,EAAAP,EAAA,KA+DeE,EAAA,QA3Df,SAAAM,GACA,IAAAC,EAAAD,EAAAC,SAEAC,EAAkBC,OAAAP,EAAA,SAAAO,GAClBC,EAAmBD,OAAAR,EAAA,EAAAQ,CAAcD,EAAA,GACjCG,EAAAD,EAAA,GACAE,EAAAF,EAAA,GA+BA,OAASP,EAAAU,EAAKC,cAAeX,EAAAU,EAAKE,SAAA,OAAAJ,GAAyBR,EAAAU,EAAKC,cAAeT,EAAA,QAAY,CAC3FW,QAAAL,EACAM,QAAA,WACA,OAAAL,OAAAM,MAEcf,EAAAU,EAAKC,cAAA,OACnBK,UAAA,QACKhB,EAAAU,EAAKC,cAAA,SACVK,UAAA,cACKhB,EAAAU,EAAKC,cAAA,SACVM,SAvCA,SAAAC,GACA,GAAAA,EAAAC,OAAAC,OAAAF,EAAAC,OAAAC,MAAAC,OACA,IACA,IAAAC,EAAA,IAAAC,WAmBA,OAjBAD,EAAAE,OAAA,SAAAC,GACA,IAAAC,EAAAC,KAAAC,MAAAH,EAAAN,OAAAU,QAEA,GAAAH,EAAAI,UAAAJ,EAAAI,SAAAT,OAAA,CACA,IAAAU,EAAAL,EAAAI,SAAAE,IAAA,SAAAC,GACA,OACAC,QAAAD,EAAAC,QACAC,aAAAF,EAAAG,OAGAhC,EAAA2B,QAEAtB,EAAA,oCAIAa,EAAAe,WAAAnB,EAAAC,OAAAC,MAAA,KACA,EACO,MAAAF,GACPT,EAAAS,EAAAL,WAgBAG,UAAA,aACAsB,KAAA,OACAC,KAAA,SACAC,OAAA,2BACMxC,EAAAU,EAAKC,cAAA,QACXK,UAAA,4BACKhB,EAAAU,EAAKC,cAAA,QACVK,UAAA,cACG,6DC5DHrB,EAAAC,EAAAC,GAAA,IAAA4C,EAAA9C,EAAA,GAAA+C,EAAA/C,EAAAM,EAAAwC,GAAAE,EAAAhD,EAAA,KAAAiD,EAAAjD,EAAA,KAAAkD,EAAAlD,EAAA,KAIAmD,EAAqBD,EAAA,SAAUE,MAAA,CAC/BC,SAAYH,EAAA,SAAUI,SAAA,cAEtBC,EAAmB5C,OAAAqC,EAAA,EAAArC,CAAU,CAC7B6C,iBAAA,SAAAC,GACA,OACAjB,aAAAiB,EAAAC,cAAAD,EAAAC,aAAAhC,OAAA,EAAA+B,EAAAC,aAAA,GAAAlB,aAAA,GACAa,SAAA,KAGAM,iBAAAR,EACAS,aAAA,SAAAC,EAAArD,GACA,IAAAiD,EAAAjD,EAAAiD,MACAK,EAAAtD,EAAAsD,cACAC,EAAAvD,EAAAuD,UACkBhB,EAAAhC,EAAIiD,OAAAC,QAAAJ,EAAArB,cACtB0B,QAAAL,EAAAR,UAAAc,KAAA,SAAAF,GACAH,GAAA,GACAL,EAAAW,YAAA,CACAC,SAAA,QACA9B,QAAA0B,EAAA1B,QACA+B,WAAAL,EAAAK,WACA9B,aAAAyB,EAAAM,cAEKC,MAAA,SAAAjD,GACLuC,GAAA,GACAC,EAAA,CACAlD,MAAAU,EAAAL,cAxBmBP,CA4BhBsC,EAAA,SACY/C,EAAA,4CCpCfF,EAAAC,EAAAC,GAAA,IAAAuE,EAAAzE,EAAA,GAAA0E,EAAA1E,EAAAM,EAAAmE,GAAAzB,EAAAhD,EAAA,KAAA2E,EAAA3E,EAAA,KAAA4E,EAAA5E,EAAA,KA0DeE,EAAA,QArDf,SAAAuD,GACA,IAAAoB,EAAApB,EAAAC,aACAA,OAAA,IAAAmB,EAAA,GAAAA,EAEAC,GADArB,EAAAsB,OACAtB,EAAAqB,cACAjB,EAAAJ,EAAAI,OACAmB,EAAAvB,EAAAuB,cACAC,EAAAxB,EAAAwB,WACAC,EAAAzB,EAAAyB,OACAnB,EAAAN,EAAAM,UACA,OAASW,EAAA3D,EAAKC,cAAegC,EAAA,EAAU,KAAQ0B,EAAA3D,EAAKC,cAAA,OACpDK,UAAA,SACKqD,EAAA3D,EAAKC,cAAA,OACVK,UAAA,SACG,iBAAoBqD,EAAA3D,EAAKC,cAAA,OAC5BK,UAAA,WACKqD,EAAA3D,EAAKC,cAAA,OACVK,UAAA,uBACKqD,EAAA3D,EAAKC,cAAA,UACVmE,OAAA,SAAA5D,GACA,OAAAyD,EAAA,eAAAzD,EAAAC,OAAA4D,SAEG1B,EAAArB,IAAA,SAAAgD,GACH,SAAAA,MAAA9C,UACamC,EAAA3D,EAAKC,cAAA,UAClByB,IAAA4C,EAAA9C,QACA6C,MAAAC,EAAA7C,cACO6C,EAAA9C,eAIGmC,EAAA3D,EAAKC,cAAA,OACfK,UAAA,SACKqD,EAAA3D,EAAKC,cAAA,OACVK,UAAA,SACG,YAAeqD,EAAA3D,EAAKC,cAAe2D,EAAA,QAAa,CACnDW,UAAAL,EACAG,MAAAvB,EAAAR,SACA/B,SAAA,SAAAiE,GACA,OAAAP,EAAA,WAAAO,UAEGL,MAAArE,QAA6B6D,EAAA3D,EAAKC,cAAe4D,EAAA,QAAY,CAChE1D,QAAAgE,EAAArE,MACAM,QAAA,WACA,OAAA4C,OAAA3C,MAEcsD,EAAA3D,EAAKC,cAAA,UACnBwE,UAAA3B,EAAAR,SACAV,KAAA,SACAtB,UAAA,kBAAAoE,OAAAX,EAAA,kBACG,4CCvDH9E,EAAAC,EAAAC,GAAA,IAAAC,EAAAH,EAAA,GAAAI,EAAAJ,EAAA,GAAAK,EAAAL,EAAAM,EAAAF,GAAAsF,EAAA1F,EAAA,KAAA2F,EAAA3F,EAAA,KAqBeE,EAAA,QAhBf,SAAAuD,GACA,IAAAW,EAAAX,EAAAW,YAEA1D,EAAkBC,OAAAP,EAAA,SAAAO,GAClBC,EAAmBD,OAAAR,EAAA,EAAAQ,CAAcD,EAAA,GACjC0B,EAAAxB,EAAA,GACAgF,EAAAhF,EAAA,GAEA,OAASP,EAAAU,EAAKC,cAAeX,EAAAU,EAAKE,SAAA,KAAAmB,KAAAV,OAA6CrB,EAAAU,EAAKC,cAAe2E,EAAA,QAAY,CAC/GvB,cACAV,aAAAtB,IACO/B,EAAAU,EAAKC,cAAe0E,EAAA,QAAY,CACvCjF,SAAAmF","file":"static/js/11.fa841916.chunk.js","sourcesContent":["import _slicedToArray from \"/Users/ed/Projects/modules/lottery/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from \"react\";\nimport DisplayError from \"../../../../components/display-error\";\n\nvar ImportButton = function ImportButton(_ref) {\n  var onImport = _ref.onImport;\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      error = _useState2[0],\n      setError = _useState2[1];\n\n  var handleImportKeyfile = function handleImportKeyfile(e) {\n    if (e.target.files && e.target.files.length) {\n      try {\n        var reader = new FileReader();\n\n        reader.onload = function (event) {\n          var jsonObj = JSON.parse(event.target.result);\n\n          if (jsonObj.accounts && jsonObj.accounts.length) {\n            var wallets = jsonObj.accounts.map(function (acc) {\n              return {\n                address: acc.address,\n                encryptedKey: acc.key\n              };\n            });\n            onImport(wallets);\n          } else {\n            setError(\"Cannot find account in the file\");\n          }\n        };\n\n        reader.readAsText(e.target.files[0]);\n        return false;\n      } catch (e) {\n        setError(e.message);\n      }\n    }\n  };\n\n  return React.createElement(React.Fragment, null, error ? React.createElement(DisplayError, {\n    message: error,\n    onClose: function onClose() {\n      return setError(undefined);\n    }\n  }) : false, React.createElement(\"div\", {\n    className: \"file\"\n  }, React.createElement(\"label\", {\n    className: \"file-label\"\n  }, React.createElement(\"input\", {\n    onChange: handleImportKeyfile,\n    className: \"file-input\",\n    type: \"file\",\n    name: \"resume\",\n    accept: \".json,application/json\"\n  }), React.createElement(\"span\", {\n    className: \"file-cta button is-light\"\n  }, React.createElement(\"span\", {\n    className: \"file-label\"\n  }, \"Select wallet file\")))));\n};\n\nexport default ImportButton;","import Neon from \"@cityofzion/neon-js\";\nimport { withFormik } from \"formik\";\nimport Form from \"./components/form\";\nimport * as Yup from \"yup\";\nvar ValidateSchema = Yup.object().shape({\n  password: Yup.string().required(\"Required\")\n});\nvar SavedWallets = withFormik({\n  mapPropsToValues: function mapPropsToValues(props) {\n    return {\n      encryptedKey: props.savedWallets && props.savedWallets.length > 0 ? props.savedWallets[0].encryptedKey : \"\",\n      password: \"\"\n    };\n  },\n  validationSchema: ValidateSchema,\n  handleSubmit: function handleSubmit(values, _ref) {\n    var props = _ref.props,\n        setSubmitting = _ref.setSubmitting,\n        setStatus = _ref.setStatus;\n    var account = Neon.create.account(values.encryptedKey);\n    account.decrypt(values.password).then(function (account) {\n      setSubmitting(false);\n      props.onConnected({\n        provider: \"LOCAL\",\n        address: account.address,\n        privateKey: account.privateKey,\n        encryptedKey: account.encrypted\n      });\n    }).catch(function (e) {\n      setSubmitting(false);\n      setStatus({\n        error: e.message\n      });\n    });\n  }\n})(Form);\nexport default SavedWallets;","import React from \"react\";\nimport { Form as FormikForm } from \"formik\";\nimport PasswordInput from \"../../../components/password-input\";\nimport DisplayError from \"../../../components/display-error\";\n\nvar Form = function Form(props) {\n  var _props$savedWallets = props.savedWallets,\n      savedWallets = _props$savedWallets === void 0 ? [] : _props$savedWallets,\n      errors = props.errors,\n      isSubmitting = props.isSubmitting,\n      values = props.values,\n      setFieldValue = props.setFieldValue,\n      submitForm = props.submitForm,\n      status = props.status,\n      setStatus = props.setStatus;\n  return React.createElement(FormikForm, null, React.createElement(\"div\", {\n    className: \"field\"\n  }, React.createElement(\"div\", {\n    className: \"label\"\n  }, \"Saved wallets\"), React.createElement(\"div\", {\n    className: \"control\"\n  }, React.createElement(\"div\", {\n    className: \"select is-fullwidth\"\n  }, React.createElement(\"select\", {\n    onBlur: function onBlur(e) {\n      return setFieldValue(\"encryptedKey\", e.target.value);\n    }\n  }, savedWallets.map(function (item) {\n    if (item && item.address) {\n      return React.createElement(\"option\", {\n        key: item.address,\n        value: item.encryptedKey\n      }, item.address);\n    }\n\n    return false;\n  }))))), React.createElement(\"div\", {\n    className: \"field\"\n  }, React.createElement(\"div\", {\n    className: \"label\"\n  }, \"Password\"), React.createElement(PasswordInput, {\n    onKeyDown: submitForm,\n    value: values.password,\n    onChange: function onChange(val) {\n      return setFieldValue(\"password\", val);\n    }\n  })), status && status.error ? React.createElement(DisplayError, {\n    message: status.error,\n    onClose: function onClose() {\n      return setStatus(undefined);\n    }\n  }) : false, React.createElement(\"button\", {\n    disabled: !values.password,\n    type: \"submit\",\n    className: \"button is-link \".concat(isSubmitting ? \"is-loading\" : \"\")\n  }, \"Open\"));\n};\n\nexport default Form;","import _slicedToArray from \"/Users/ed/Projects/modules/lottery/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from \"react\";\nimport ImportButton from \"./components/import-button\";\nimport SavedWallets from \"../saved-wallets\";\n\nvar ImportFile = function ImportFile(props) {\n  var onConnected = props.onConnected;\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      wallets = _useState2[0],\n      setWallets = _useState2[1];\n\n  return React.createElement(React.Fragment, null, wallets && wallets.length ? React.createElement(SavedWallets, {\n    onConnected: onConnected,\n    savedWallets: wallets\n  }) : React.createElement(ImportButton, {\n    onImport: setWallets\n  }));\n};\n\nexport default ImportFile;"],"sourceRoot":""}