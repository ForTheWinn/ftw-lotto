{"version":3,"sources":["../node_modules/@neo-react/local-wallet/lib/scenes/import-nep2/index.js","../node_modules/@neo-react/local-wallet/lib/scenes/import-nep2/components/form.js","../node_modules/@neo-react/local-wallet/lib/scenes/import-file/index.js"],"names":["__webpack_require__","r","__webpack_exports__","_cityofzion_neon_js__WEBPACK_IMPORTED_MODULE_0__","_cityofzion_neon_js__WEBPACK_IMPORTED_MODULE_0___default","n","formik__WEBPACK_IMPORTED_MODULE_1__","_components_form__WEBPACK_IMPORTED_MODULE_2__","react_toastify__WEBPACK_IMPORTED_MODULE_3__","ImportNep2","Object","mapPropsToValues","props","encryptedKey","wallet","password","validate","values","errors","a","is","handleSubmit","_ref","setSubmitting","create","account","decrypt","then","onConnected","provider","address","privateKey","encrypted","catch","e","error","message","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","_components_password_input__WEBPACK_IMPORTED_MODULE_2__","touched","isSubmitting","setFieldValue","submitForm","isValidSubmit","createElement","className","placeholder","value","onChange","target","isLoading","onKeyDown","val","type","disabled","concat","_Users_ed_Projects_modules_lottery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_1__","react__WEBPACK_IMPORTED_MODULE_1___default","_import_nep2__WEBPACK_IMPORTED_MODULE_2__","_useState","_useState2","setEncryptedKey","_useState3","_useState4","setAddress","Fragment","reader","FileReader","onload","event","jsonObj","JSON","parse","result","key","accounts","length","files","readAsText","name","accept"],"mappings":"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","file":"static/js/11.79112874.chunk.js","sourcesContent":["import Neon from \"@cityofzion/neon-js\";\nimport { withFormik } from \"formik\";\nimport Form from \"./components/form\";\nimport { toast } from \"react-toastify\";\nvar ImportNep2 = withFormik({\n  // Transform outer props into form values\n  mapPropsToValues: function mapPropsToValues(props) {\n    return {\n      encryptedKey: props.wallet && props.wallet.encryptedKey ? props.wallet.encryptedKey : \"\",\n      password: \"\"\n    };\n  },\n  validate: function validate(values) {\n    var errors = {};\n\n    if (!values.encryptedKey) {\n      errors.encryptedKey = \"Required\";\n    }\n\n    if (!values.password) {\n      errors.password = \"Required\";\n    }\n\n    if (!Neon.is.encryptedKey(values.encryptedKey)) {\n      errors.encryptedKey = \"It is not valid encrypted key format\";\n    }\n\n    return errors;\n  },\n  handleSubmit: function handleSubmit(values, _ref) {\n    var props = _ref.props,\n        setSubmitting = _ref.setSubmitting;\n    var account = Neon.create.account(values.encryptedKey);\n    account.decrypt(values.password).then(function (account) {\n      setSubmitting(false);\n      props.onConnected({\n        provider: \"LOCAL\",\n        address: account.address,\n        privateKey: account.privateKey,\n        encryptedKey: account.encrypted\n      });\n    }).catch(function (e) {\n      setSubmitting(false);\n      toast.error(e.message);\n    });\n  }\n})(Form);\nexport default ImportNep2;","import React from \"react\";\nimport { Form as FormikForm } from \"formik\";\nimport PasswordInput from \"../../../components/password-input\";\nexport default (function (props) {\n  var touched = props.touched,\n      errors = props.errors,\n      isSubmitting = props.isSubmitting,\n      values = props.values,\n      setFieldValue = props.setFieldValue,\n      submitForm = props.submitForm;\n  var encryptedKey = values.encryptedKey,\n      password = values.password;\n  var isValidSubmit = encryptedKey && password;\n  return React.createElement(FormikForm, null, React.createElement(\"div\", {\n    className: \"field\"\n  }, React.createElement(\"div\", {\n    className: \"label\"\n  }, \"Encrypted key\"), React.createElement(\"input\", {\n    className: \"input\",\n    placeholder: \"Encrypted key\",\n    value: encryptedKey,\n    onChange: function onChange(e) {\n      return setFieldValue(\"encryptedKey\", e.target.value);\n    }\n  }), errors.encryptedKey && touched.encryptedKey && React.createElement(\"div\", {\n    className: \"help is-danger\"\n  }, errors.encryptedKey)), React.createElement(\"div\", {\n    className: \"field\"\n  }, React.createElement(\"div\", {\n    className: \"label\"\n  }, \"Password\"), React.createElement(PasswordInput, {\n    isLoading: isSubmitting,\n    onKeyDown: function onKeyDown() {\n      return isValidSubmit ? submitForm() : false;\n    },\n    onChange: function onChange(val) {\n      return setFieldValue(\"password\", val);\n    },\n    value: password\n  }), errors.password && touched.password && React.createElement(\"div\", {\n    className: \"help is-danger\"\n  }, errors.password)), React.createElement(\"button\", {\n    type: \"submit\",\n    disabled: !isValidSubmit,\n    className: \"button is-link \".concat(isSubmitting ? \"is-loading\" : \"\")\n  }, \"Open wallet\"));\n});","import _slicedToArray from \"/Users/ed/Projects/modules/lottery/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from \"react\";\nimport ImportNep2 from \"../import-nep2\";\nimport { toast } from \"react-toastify\";\n\nvar ImportFile = function ImportFile(props) {\n  var onConnected = props.onConnected;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      encryptedKey = _useState2[0],\n      setEncryptedKey = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      address = _useState4[0],\n      setAddress = _useState4[1];\n\n  var handleImportKeyfile = function handleImportKeyfile(e) {\n    try {\n      var reader = new FileReader();\n\n      reader.onload = function (event) {\n        var jsonObj = JSON.parse(event.target.result);\n\n        if (jsonObj.key) {\n          setEncryptedKey(jsonObj.key);\n          setAddress(jsonObj.address);\n        } // TODO::Need to make better importing system\n\n\n        if (jsonObj.accounts && jsonObj.accounts.length > 0) {\n          setEncryptedKey(jsonObj.accounts[0].key);\n          setAddress(jsonObj.accounts[0].address);\n        }\n      };\n\n      if (e.target.files) {\n        if (e.target.files.length > 0) {\n          reader.readAsText(e.target.files[0]);\n        }\n      }\n\n      return false;\n    } catch (e) {\n      toast.error(e.message);\n    }\n  };\n\n  return React.createElement(React.Fragment, null, encryptedKey ? React.createElement(ImportNep2, {\n    onConnected: onConnected,\n    wallet: {\n      provider: \"LOCAL\",\n      encryptedKey: encryptedKey,\n      address: address\n    }\n  }) : React.createElement(\"div\", {\n    className: \"file\"\n  }, React.createElement(\"label\", {\n    className: \"file-label\"\n  }, React.createElement(\"input\", {\n    onChange: handleImportKeyfile,\n    className: \"file-input\",\n    type: \"file\",\n    name: \"resume\",\n    accept: \".json,application/json\"\n  }), React.createElement(\"span\", {\n    className: \"file-cta button is-light\"\n  }, React.createElement(\"span\", {\n    className: \"file-label\"\n  }, \"Select wallet file\")))));\n};\n\nexport default ImportFile;"],"sourceRoot":""}